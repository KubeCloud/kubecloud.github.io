<!doctype html><html lang=en-us><head><meta charset=utf-8><title>kubecloud</title><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta name=description content="The second day of breakout sessions. Crazy walk-up line before the first session of the day with Sam Newman on Building Microservices on…"><meta name=author content="kubecloud.io"><meta name=generator content="Hugo 0.62.2"><link rel=stylesheet href=https://kubecloud.github.io/plugins/bootstrap/bootstrap.min.css><link rel=stylesheet href=https://kubecloud.github.io/plugins/themify-icons/themify-icons.css><link rel=stylesheet href=https://kubecloud.github.io/scss/style.min.e92287ba30e877e203e37f813150a9226378acce473f0a198f39c3a0294241b4.css integrity="sha256-6SKHujDod+ID43+BMVCpImN4rM5HPwoZjznDoClCQbQ=" media=screen><link rel="shortcut icon" href=https://kubecloud.github.io/images/favicon.png type=image/x-icon><link rel=icon href=https://kubecloud.github.io/images/favicon.png type=image/x-icon></head><body><div class=preloader></div><header class=navigation><div class="col-md-10 offset-md-1"><nav class="navbar navbar-expand-lg navbar-white bg-transparent"><a class="navbar-brand mobile-view" href=https://kubecloud.github.io/><img class=img-fluid src=https://kubecloud.github.io/images/kubecloud.png alt=kubecloud></a>
<button class="navbar-toggler border-0" type=button data-toggle=collapse data-target=#navigation>
<i class="ti-menu h3"></i></button><div class="collapse navbar-collapse text-center" id=navigation><a class="navbar-brand desktop-view" href=https://kubecloud.github.io/><img class=img-fluid src=https://kubecloud.github.io/images/kubecloud.png alt=kubecloud></a><ul class="navbar-nav ml-auto"><li class=nav-item><a class=nav-link href=https://kubecloud.github.io/>Home</a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>Blog</a><div class=dropdown-menu aria-labelledby=navbarDropdown><a class=dropdown-item href=https://kubecloud.github.io/blog>All</a><div class=dropdown-divider></div><a class=dropdown-item href=https://kubecloud.github.io/categories/conference>Conference</a>
<a class=dropdown-item href=https://kubecloud.github.io/categories/kops>Kops</a>
<a class=dropdown-item href=https://kubecloud.github.io/categories/raspberry-pi>Raspberry pi</a>
<a class=dropdown-item href=https://kubecloud.github.io/categories/thesis>Thesis</a></div></li><li class=nav-item><a class=nav-link href=https://kubecloud.github.io/about>About</a></li></ul><div class="search px-4"><button id=searchOpen class=search-btn><i class=ti-search></i></button><div class=search-wrapper><form action=https://kubecloud.github.io//search class=h-100><input class="search-box px-4" id=search-query name=s type=search placeholder="Type & Hit Enter..."></form><button id=searchClose class=search-close><i class="ti-close text-dark"></i></button></div></div></div></nav></div></header><section class=section-sm><div class=container><div class=row><div class="col-lg-10 mx-auto"><a href=https://kubecloud.github.io/categories/conference class=text-primary>Conference</a><h1>AWS re:invent 2017 — day 2</h1><div class="mb-3 post-meta"><span>By Kasper Nissen,</span>
<span>29 November 2017</span></div><img src=https://kubecloud.github.io/images/1__jX4ICrITZNtd9ela6p5qww.jpeg class="img-fluid w-100 mb-4" alt="AWS re:invent 2017 — day 2"><div class="content mb-5"><p>The second day of breakout sessions. Crazy walk-up line before the first session of the day with Sam Newman on Building Microservices on AWS. Luckily I got up early and queued up 70 minutes before the talk. At this point, 20–30 people were already lined up. But I managed to get in.</p><h4 id=building-microservices-onaws>Building Microservices on AWS</h4><p>Sam started out by defining microservices as:</p><blockquote><p>“<strong>Independently deployable</strong> services that <strong>work together</strong>, modelled around a <strong>business domain</strong>”</p></blockquote><p><img src=https://kubecloud.github.io/images/1__jX4ICrITZNtd9ela6p5qww.jpeg alt></p><p>Alright, moving on. The Gartner Hype Cycle was up next.</p><p><img src=https://kubecloud.github.io/images/1__tGDuo1r0PYDYtW5Kx2ADXg.jpeg alt></p><p>It puts Microservices at the peak of inflated expectations and SOA (Service Oriented Architecture) at the Through of Disillusionment. These two buzzwords is sort of the same thing.</p><p>Back to microservices and the definition mentioned above. Sam pointed out that the most important part of the definition is <strong><em>independently deployability</em></strong> which leads to autonomy, and allows for replaceability of components.</p><p>Then Sam went on talking about how Amazon back in the day realized they needed to split teams up into smaller teams in order to reduce coordination and allowing people to move fast.</p><blockquote><p>“No, communication is terrible!” — Jeff Bezos</p></blockquote><p><img src=https://kubecloud.github.io/images/1__WRyT7Q33n1EtG0PVg__xouQ.jpeg alt></p><p>Autonomy is all about reducing coordination and allowing people to be fast in doing what they need to do. Sam spoke about communication pathways, the more people, the more communication pathways, and the higher the need to coordinate.</p><p>So the takeaway here is, coordination will slow you down, and building small autonomous teams will speed up your process because of the limited communication pathways. Further teams work within the service boundary and mostly only needs to communicate using an API.</p><p>Another highlight, was the single most common problem when building microservices; services reaching straight into the database of another service instead of communicating through the API. Don’t do this. Don’t allow other parties to use your backdoor, you won’t be able to detect all the things they are doing. Only let them use the front door.</p><blockquote><p>Microservices are an architecture which optimise for autonomy</p></blockquote><p>Once you have decided to built microservices, next up is how you then run and manage them in production. Sam talked about the higher level abstractions of the cloud such as Elastic Beantalk, if you are a small shop, or maybe AWS ECS if you package your applications into docker containers.</p><p>Sam also mentioned the history of Borg at Google, and how all these lessons learned ended up in the open source container scheduler, Kubernetes.</p><p>He also highlighted some the possible problems of using container orchestration. If you don’t take full advantage of the platform, you may end up with one container starving the resources on a node, resulting in the rest of the applications failing because of starvation. Containers can get in each other’s way when running multi-tenant systems.</p><p>Last, but not least, was a small definition of serverless, and that many AWS services, such as Dynamo, S3, and Lambda can be seen as serverless tools. Again, serverless is a higher level abstraction where developers don’t have to think about the underlying infrastructure. But, be careful, if running a hybrid solution, such as functions using the same database, you may end up killing your database because of the lack of throttling. Instead, use serverless database tools, such as Dynamo.</p><p>As always, Sam Newman is a really good and insightful presenter — and this performance was no exception.</p><h4 id=building-effective-container-images>Building Effective Container Images</h4><p>The second talk of the day featured Abby Fuller, AWS, and Prakash Janakiraman, Nextdoor.</p><p>Abby started out by providing an introduction of how layers in Docker works, with the read-only base layers, and the thin read-write layer on top. Why do I care how many layers I have? Well, more layers result in larger images. And you don’t want large docker images. Smaller images mean faster builds and deploys. Further, it will limit the surface of attack.</p><p><img src=https://kubecloud.github.io/images/1__I__5DSI__uRLdFMhJlnl4tNg.jpeg alt></p><p>**_How can I reduce my layers? <br>_**Sharing is caring. Use shared base layers where possible in order to reuse as many of the layers as possible. Don’t use a RUN statement for each cmd you want to run. Combine them in one statement instead, so keep them it in one layer.</p><p><img src=https://kubecloud.github.io/images/1__Dm1r2EveJ1r12__0rWM0icA.jpeg alt></p><p>Another good practice is to use minimal base images. Instead of using Ubuntu for a python app, use the python alpine. You probably don’t need the entire OS.</p><p>Further, use the Docker cache. Cache rules everything, which means that the order of statement really matters. Place the dynamic statements as far down in the Dockerfile as possible.</p><p>After Abby’s introduction and best practices for optimizing container images, Prakash from Nextdoor talked about how they were using these techniques at Nextdoor. Nextdoor is a social network for neighborhood. They started out with a python/django monolithic applications, but have been transitioning into a microservice oriented architecture with Go as the programming language. They moved from pre-baking AMI’s to utilizing Docker Containers.</p><p>Great presentation, even though it was fairly short, but then there was time for questions from the audience.</p><h4 id=containerised-machine-learning-onaws>Containerised Machine Learning on AWS</h4><p>The thirds and last talk of the day featured Asif Khan, Hokuto Hoshi, Yuichiro Someya.</p><p>Asif started out by giving an introduction to machine learning and all the different tools that AWS provides.</p><p><img src=https://kubecloud.github.io/images/1__plSsltyo4vWCpAvjPz8anQ.jpeg alt></p><p>Further, Asif showed an example of machine learning workflow. This slide below shows all the different stakeholders and how the services work together in order to run the machine learning models.</p><p><img src=https://kubecloud.github.io/images/1__B6meDCkbjQwdWoRSHLzclw.jpeg alt></p><p>The last part of the presentation featured experiences on running a machine learning platform on AWS from Cookpad.</p><p>Cookpad needed to classify images from the Photo Roll in order to only upload pictures of food and make them available within their service. It was a great presentation, even though I don’t know much about machine learning and image classification, but it’s definitely something I will be looking more into in the future.</p><p>All in all, three very intersting talks. Further the expo opened today. Spent a couple of hours there talking to many different companies. It’s massive!</p></div></div></div></div></section><footer><div class="col-md-10 offset-md-1"><div class=row><div class="col-lg-3 col-sm-6 mb-5"><a href=https://kubecloud.github.io/><img class=img-fluid src=https://kubecloud.github.io/images/kubecloud.png alt=kubecloud></a></div><div class="col-lg-3 col-sm-6 mb-5"></div><div class="col-lg-3 col-sm-6 mb-5"></div><div class="col-lg-3 col-sm-6 mb-5 text-right"><h6 class=mb-4>Quick Links</h6><ul class=list-unstyled><li class=mb-3><a class=text-dark href=https://kubecloud.github.io/blog>Blog</a></li><li class=mb-3><a class=text-dark href=https://kubecloud.github.io/about/about>About</a></li></ul></div><div class="col-6 py-4 text-left social border-top"><ul><li><a class=social-link href=https://twitter.com/phennex><i class=ti-twitter-alt></i></a></li><li><a class=social-link href=https://twitter.com/mrjensens><i class=ti-twitter-alt></i></a></li><li><a class=social-link href=https://github.com/kubecloud><i class=ti-github></i></a></li></ul></div><div class="col-6 py-4 text-right border-top">@2020 <a href=https://kubecloud.io>kubecloid.io</a> All Rights Reserved</div></div></div></footer><script>var indexURL="https://kubecloud.github.io/index.json"</script><script src=https://kubecloud.github.io/plugins/jQuery/jquery.min.js></script><script src=https://kubecloud.github.io/plugins/bootstrap/bootstrap.min.js></script><script src=https://kubecloud.github.io/plugins/search/fuse.min.js></script><script src=https://kubecloud.github.io/plugins/search/mark.js></script><script src=https://kubecloud.github.io/plugins/search/search.js></script><script src=https://kubecloud.github.io/js/script.min.js></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','Your ID','auto');ga('send','pageview');</script></body></html>